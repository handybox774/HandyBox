<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Time Zone Converter - Convert Time Across Timezones | Handy Box</title>
  <meta name="description" content="Convert time between timezones instantly with Handy Box. Free online timezone converter and world clock viewer." />

  <!-- ==================== Dark Mode (Instant Load) ==================== -->
  <script>
    (function () {
      try {
        var theme = null;
        try { theme = localStorage.getItem('darkMode'); } catch (e) { theme = null; }
        var qp = new URL(window.location.href).searchParams.get('theme');
        var isDark = (theme === 'enabled') || (theme === null && qp === 'dark');
        if (isDark) {
          document.documentElement.classList.add('dark-mode');
          document.addEventListener('DOMContentLoaded', function () {
            document.body.classList.add('dark-mode');
          });
        }
      } catch (e) {}
    })();
  </script>

  <!-- ==================== Performance Preconnects ==================== -->
  <link rel="preconnect" href="https://unpkg.com" crossorigin>

  <!-- ==================== Favicon & Styles ==================== -->
  <link rel="icon" type="image/png" href="/favicon-32.png" sizes="32x32">
  <link rel="stylesheet" href="style.css?v=16">

  <!-- ==================== Page-specific inline styles ==================== -->
  <style>
    .tool-container { max-width: 800px; margin: 30px auto; padding: 0 20px; }
    .tool-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #fff; box-shadow: 0 2px 6px rgba(0,0,0,.1); }
    body.dark-mode .tool-section { background: #2c2c2c; border-color: #444; }
    .tool-header { text-align: center; margin-bottom: 20px; color: #333; font-weight: bold; font-size: 1.2em; }
    body.dark-mode .tool-header { color: #f4f4f4; }
    .input-group { margin-bottom: 15px; }
    select, input { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
    body.dark-mode select, body.dark-mode input { background: #333; color: #f4f4f4; border-color: #555; }
    .convert-button { padding: 12px; background: #007bff; color: #fff; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; transition: background-color .3s; margin-top: 10px; }
    .convert-button:hover { background: #0056b3; }
    .result-box { padding: 15px; margin: 15px 0; background: #f8f9fa; border-radius: 4px; border: 1px solid #dee2e6; font-weight: bold; text-align: center; }
    body.dark-mode .result-box { background: #333; color: #f4f4f4; border-color: #555; }
    .page-title { text-align: center; margin: 30px 0 10px; color: #333; }
    body.dark-mode .page-title { color: #f4f4f4; }
    .page-description { text-align: center; margin-bottom: 30px; color: #666; max-width: 600px; margin-left: auto; margin-right: auto; }
    body.dark-mode .page-description { color: #ccc; }
    .back-button { display: inline-block; margin: 20px; padding: 8px 16px; background: #eee; border: 1px solid #ccc; border-radius: 6px; text-decoration: none; font-weight: bold; color: #333; }
    body.dark-mode .back-button { background: #444; color: #f4f4f4; border-color: #666; }

    /* ÿ≠ŸÇŸÑ ÿ®ÿ≠ÿ´ ÿµÿ∫Ÿäÿ± ŸÅŸàŸÇ ÿßŸÑŸÇŸàÿßÿ¶ŸÖ */
    .tz-search { margin-top: 6px; margin-bottom: 6px; }
    .hint { font-size: .9em; opacity: .8; margin-top: 4px; }
  </style>

  <!-- ==================== Main Script ==================== -->
  <script src="main-script.js?v=16" defer></script>
</head>

<body>
  <!-- Sidebar -->
  <nav class="sidebar">
    <ul>
      <li class="dropdown-item">
        <a href="#">Converters <span class="arrow">‚ñº</span></a>
        <ul class="dropdown-content">
          <li><a href="converter.html">Image Converter</a></li>
          <li><a href="pdf.html">PDF Merger</a></li>
          <li><a href="converter-tools.html">Converter Tools</a></li>
        </ul>
      </li>
      <li class="dropdown-item">
        <a href="#">Generators <span class="arrow">‚ñº</span></a>
        <ul class="dropdown-content">
          <li><a href="qrcode.html">QR Code Generator</a></li>
          <li><a href="password.html">Password Generator</a></li>
          <li><a href="color-generator.html">Color Generator</a></li>
        </ul>
      </li>
      <li class="dropdown-item">
        <a href="#">Network <span class="arrow">‚ñº</span></a>
        <ul class="dropdown-content">
          <li><a href="ip-address.html">What is my IP?</a></li>
          <li><a href="user-agent.html">My User Agent</a></li>
        </ul>
      </li>
      <li id="darkModeToggleMobile" class="dark-mode-mobile">
        <a href="#" id="darkModeToggleInMenu" class="dark-mode-toggle-menu">
          <span class="dark-mode-text">Dark Mode</span>
        </a>
      </li>
    </ul>
  </nav>

  <!-- Header -->
  <header>
    <div class="header-content">
      <a href="index.html" class="logo"><h1>Handy Box</h1></a>
      <button id="darkModeToggle" class="dark-mode-toggle">Dark Mode</button>
      <div class="hamburger-menu">
        <span class="bar"></span><span class="bar"></span><span class="bar"></span>
      </div>
    </div>
  </header>

  <!-- Main -->
  <main>
    <a href="converter-tools.html" class="back-button">üîô Back to Categories</a>

    <h2 class="page-title">üïí Time & Date Tools</h2>
    <p class="page-description">Use these tools to convert timezones and view current time across the globe.</p>

    <div class="tool-container">
      <!-- Timezone Converter -->
      <div class="tool-section">
        <div class="tool-header">üåç Timezone Converter</div>

        <div class="input-group">
          <label>From Timezone:</label>
          <input type="text" id="fromSearch" class="tz-search" placeholder="Search (e.g., Riyadh or Asia/)" />
          <select id="fromZone"></select>
          <div class="hint">Tip: type part of city/region to filter</div>
        </div>

        <div class="input-group">
          <label>Time:</label>
          <input type="time" id="inputTime" />
        </div>

        <div class="input-group">
          <label>To Timezone:</label>
          <input type="text" id="toSearch" class="tz-search" placeholder="Search (e.g., London or Europe/)" />
          <select id="toZone"></select>
        </div>

        <button class="convert-button" onclick="convertTime()">Convert Time</button>
        <div class="result-box" id="convertedTime">Result will appear here</div>
      </div>

      <!-- Current Time Viewer -->
      <div class="tool-section">
        <div class="tool-header">‚è∞ Current Time Viewer</div>

        <div class="input-group">
          <label>Select Timezone:</label>
          <input type="text" id="currentSearch" class="tz-search" placeholder="Search (e.g., Cairo or Africa/)" />
          <select id="currentZone"></select>
        </div>

        <button class="convert-button" onclick="showCurrentTime()">Show Current Time</button>
        <div class="result-box" id="currentTimeResult">Result will appear here</div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Handy Box. All rights reserved.</p>
  </footer>

  <!-- Luxon (ŸÖÿ∑ŸÑŸàÿ® ŸÑŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿ≤ŸÖŸÜŸä) -->
  <script src="https://cdn.jsdelivr.net/npm/luxon@3/build/global/luxon.min.js"></script>

  <!-- Page logic -->
  <script>
    // ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÜÿßÿ∑ŸÇ ÿßŸÑÿ≤ŸÖŸÜŸäÿ© ÿßŸÑŸÖÿØÿπŸàŸÖÿ©
    const ALL_TIMEZONES = (typeof Intl.supportedValuesOf === 'function' && Intl.supportedValuesOf('timeZone'))
      ? Intl.supportedValuesOf('timeZone')
      : [
          'UTC','Europe/London','Europe/Paris','Europe/Berlin','Asia/Riyadh','Asia/Dubai',
          'Asia/Tokyo','Asia/Seoul','America/New_York','America/Los_Angeles'
        ]; // fallback ŸÖÿ®ÿ≥Ÿëÿ∑

    // ÿπŸÜÿßÿµÿ± ÿßŸÑŸÇŸàÿßÿ¶ŸÖ ŸàÿßŸÑÿ®ÿ≠ÿ´
    const fromSelect   = document.getElementById('fromZone');
    const toSelect     = document.getElementById('toZone');
    const currentSelect= document.getElementById('currentZone');
    const fromSearch   = document.getElementById('fromSearch');
    const toSearch     = document.getElementById('toSearch');
    const currentSearch= document.getElementById('currentSearch');

    // ÿØÿßŸÑÿ© ÿ™ŸàŸÑŸäÿØ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™ ÿ≠ÿ≥ÿ® ŸÅŸÑÿ™ÿ±
    function renderOptions(selectEl, query = '') {
      const q = (query || '').trim().toLowerCase();
      const prev = selectEl.value;

      const list = q ? ALL_TIMEZONES.filter(z => z.toLowerCase().includes(q)) : ALL_TIMEZONES;
      const opts = list.map(z => `<option value="${z}">${z}</option>`).join('');
      selectEl.innerHTML = opts || '<option value="" disabled>(No matches)</option>';

      if (prev && list.includes(prev)) {
        selectEl.value = prev;
      } else if (!prev && list.length) {
        const hinted = list.find(x => /riyadh/i.test(x)) || list[0];
        selectEl.value = hinted;
      }
    }

    // ÿ™ÿπÿ®ÿ¶ÿ© ÿ£ŸàŸÑŸäÿ©
    renderOptions(fromSelect);
    renderOptions(toSelect);
    renderOptions(currentSelect);

    // ÿßŸÑÿ®ÿ≠ÿ´ ÿßŸÑÿ≠Ÿä
    fromSearch.addEventListener('input', () => renderOptions(fromSelect, fromSearch.value));
    toSearch.addEventListener('input',   () => renderOptions(toSelect,   toSearch.value));
    currentSearch.addEventListener('input', () => renderOptions(currentSelect, currentSearch.value));

    // ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿ®ŸäŸÜ ÿßŸÑŸÖŸÜÿßÿ∑ŸÇ (Luxon)
    const { DateTime } = luxon;

    function convertTime() {
      const input = document.getElementById('inputTime').value;
      const resultEl = document.getElementById('convertedTime');
      const fromZone = fromSelect.value;
      const toZone = toSelect.value;

      if (!input) { resultEl.textContent = 'Please enter a time.'; return; }
      if (!fromZone || !toZone) { resultEl.textContent = 'Please select both timezones.'; return; }

      const [H, M] = input.split(':').map(Number);
      const fromDT = DateTime.now().setZone(fromZone).set({ hour: H, minute: M, second: 0, millisecond: 0 });
      const toDT = fromDT.setZone(toZone);

      resultEl.textContent = `Time in ${toZone}: ${toDT.toFormat('HH:mm')}`;
    }

    // ÿπÿ±ÿ∂ ÿßŸÑŸàŸÇÿ™ ÿßŸÑÿ≠ÿßŸÑŸä
    function showCurrentTime() {
      const zone = currentSelect.value;
      const now = new Date();
      const result = document.getElementById('currentTimeResult');

      if (!zone) { result.textContent = 'Please select a timezone.'; return; }

      const formatted = new Intl.DateTimeFormat('en-US', {
        weekday: 'long', year: 'numeric', month: 'long', day: 'numeric',
        hour: '2-digit', minute: '2-digit', second: '2-digit',
        hour12: false, timeZone: zone
      }).format(now);

      result.textContent = `Current time in ${zone}: ${formatted}`;
    }

    // ŸÜŸÉÿ¥ŸÅ ÿßŸÑÿØŸàÿßŸÑ ŸÑŸÑÿ£ÿ≤ÿ±ÿßÿ± (onclick)
    window.convertTime = convertTime;
    window.showCurrentTime = showCurrentTime;
  </script>
</body>
</html>
